<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Reader</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



</head>

<body>
	<h1>Reader page</h1>
	<script type="text/javascript">
		var urlParams = new URLSearchParams(window.location.search);
		var authCode = urlParams.get('code'),
			state = urlParams.get('state'),
			error = urlParams.get('error'),
			errorDescription = urlParams.get('error_description');

		if (error) {
			window.alert("The following error took place:" + error + ". Description of error:" + errorDescription);
		} else {
			window.opener.postAuthorize(state, authCode);
		}
		window.close();
	</script>

</body>

</html>